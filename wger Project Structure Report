wger Project Structure Report
Group Member Information:

Name: Simin Cheng, Student ID: 1663732, Email: sc1040@students.waikato.ac.nz
Name: Bai Lu, Student ID: 1671298, Email: ys677@students.waikato.ac.nz
Name: Ziqi Lin, Student ID: 1674249, Email: zl354@students.waikato.ac.nz
Name: Zhengrong Chen, Student ID: 1660321, Email: zc199@students.waikato.ac.nz

Project Overview

Project Name and Functionality

wger is an open-source fitness and nutrition management application that helps users plan, track, and analyse their workouts, diet, and progress. It combines workout planning, nutrition tracking, and basic gym management in one platform, available across multiple devices and deployment options.


创建新功能前需要开启issue讨论
代码格式要求：
测试要求：
新功能需要写测试

Core Features
wger offers a comprehensive set of features designed to help users manage and track their fitness and nutrition goals.

On the dashboard, users can view their workout routine, nutrition plan, and body weight graph. All these can also be tracked using a built-in calendar.

Customizable Workout Plans
Users can create workout routines by defining the exercises, number of sets, weight, repetitions, and even supersets or automated progression rules. After completing a workout, they can record a detailed training log, including date, time, notes, overall impression, and specific exercise results (repetitions, weight, RIR). A log overview is also provided.

Workout routines can be downloaded or viewed in a table format, and users can create reusable templates. Body measurements can be tracked for any part of the body—for example, logging that an arm measures 26 cm today. A body weight overview allows users to add weight records, with statistics automatically displayed in both table and graph formats.

Nutrition Tracking
When adding a meal, users can enter an ingredient name and amount to view its nutrition information. The application tracks daily totals for protein, carbohydrates, and fat, and compares them with the user’s target goals.

Additional tools include a daily calorie calculator based on basal metabolic rate (BMR) and physical activity level, as well as a body mass index (BMI) calculator based on weight and height.

Exercise Wiki
A built-in exercise database lets users search by name or filter by muscle group, equipment, or category. Users can also contribute new exercise to the database.

Platform and Deployment
Wger is available as a cross-platform application for Android, iOS, F-Droid, and Flathub. It also supports self-hosted deployment via Docker, for full control.

Multilingual Support and Integrations
Wger supports 41 languages, with more than 60% already translated, thanks to community contributions via Weblate. A REST API is available for third-party integrations and automation.

Gym Management
Basic gym management features are included, enabling trainers and coaches to monitor their students’ progress, and allowing gym managers to keep track of member contracts. Members can be added, deactivated, or removed as needed.


License Information

The project has a multi-license structure:

Application Code: GNU Affero General Public License 3.0 or later.
Exercise/Food Data: Creative Commons Attribution Share-Alike 3.0 (CC-BY-SA 3.0).
Documentation: Creative Commons Attribution Share-Alike (CC-BY-SA 4.0).

Contribution Guidelines
link：https://wger.readthedocs.io/en/latest/contributing.html
Contributors are encouraged across different areas (code, translations, documentation).Contributing Guide provides specific guidelines such as using feature branches, writing good commit messages, testing changes, and code formatting.

Support Resources

Development – For developers working on the backend, frontend, or mobile app.
Documentation: [Development Guide](https://wger.readthedocs.io/en/latest/index.html#development)

Deployment – For fitness enthusiasts or gyms/fitness studios who want full control over their installation.
Documentation: [Installation & Production Guide](https://wger.readthedocs.io/en/latest/index.html#development)

Administration – For system administrators or technical staff managing a wger server.
Covers tasks such as managing the application, syncing exercises and ingredients, configuring settings, and setting up an authentication proxy (SSO).
Documentation: [Administration Guide](https://wger.readthedocs.io/en/latest/index.html#administration)

API – For developers using wger’s API, including public endpoints (e.g., list of exercises or ingredients) and user-owned objects (e.g., workout routines).
Suitable for syncing workout logs from IoT devices (e.g., smart scales, fitness trackers) or managing large user bases (e.g., gym chains).
Documentation: [API Guide](https://wger.readthedocs.io/en/latest/index.html#api)

Interactive Discussion – For anyone using wger to ask questions, share feedback, or discuss ideas.
Discord: [Join here](https://discord.gg/rPWFv6W)
Mastodon: [Follow here](https://fosstodon.org/@wger)



High-Level Structure
Repository Organization
Wger uses a multi-repository, single-project structure with 4 core specialized repositories, where a single project is distributed across multiple specialized repositories. Each repository is responsible for a different component of the project. This structure allows developers with different technical expertise to focus on their specific areas, keeping the project modular and easy to maintain.
The project includes additional repositories for Kubernetes deployment (helm-charts), Unraid support (unraid-templates), and other specialized tools.

Repository Identification
Backend Repository: wger-project/wger
Purpose: The Django-based REST API server and web backend of the project for managing workouts, nutrition plans, and body statistics.
Developer Access Reason:
-Implementing business logic, API endpoints, and data models
-Configuring server-side settings and deployments
-Adding new fitness exercises, nutrition data, or workout features
Expected Content: Python/Django code, database models, REST API endpoints, and some frontend components.

Frontend Repository: wger-project/react
Purpose: Contains the React components used in the wger web interface.
Developer Access Reason:
-Building web components
-Implementing UI patterns
-User interface optimization
Expected Content: TypeScript/React code and frontend component libraries.

Mobile Repository: wger-project/flutter
Purpose: A mobile application written in Flutter. Let users access the wger services on their mobile devices.
Developer Access Reason:
-Develop or maintain the mobile application
-Implementing responsive mobile interface
-Handling iOS/Android deployments
Expected Content: Dart/Flutter code, mobile app interface, and API client implementations.

Docker Repository: wger-project/docker
Purpose: Deploy the wger application using Docker.
Developer Access Reason:
-Set up production environments
-Create local development environments
Expected Content: Docker configuration files, environment variable settings, and instructions for building and running the application.

Project Architecture
Overall Architecture
wger uses a container-based architecture with six separate services. The backend is built on Django's Model-View-Template (MVT) pattern, combined with a RESTful API design, to support a variety of client applications.
//去掉基于container的部署形式，简述docker部署，说明非docker部署的困难

Core Technology Stack
Backend Technologies

Core Framework: Django
Database Support: PostgreSQL, SQLite
API Framework: Django REST Framework
Caching System: Redis
Task Queue: Celery
Web Server:Nginx(reverse proxy)
WSGI Server:Gunicorn

Front-end
UI Framework: Bootstrap 
Interactive Enhancement: HTMX 
JavaScript Library: jQuery 
Build Tools: Yarn, Sass compilation
Modern Components: React with TypeScript, Vite, ESLint
Package Management: Yarn workspaces with automated resource deployment

Mobile
Mobile Framework: Flutter 
Supported Platforms: Android, iOS, Web, Flatpak
State Management: Provider  + Flutter Riverpod 
Local Database: Drift 
UI Components: Material Design + flex_color_scheme 
Key Dependencies: 40+ libraries including fl_chart, http, font_awesome_flutter

Deployment
Containers: Docker, Docker Compose
Reverse Proxy: Nginx
Process Manager: Supervisor

//各模块功能详细说明
Main Component Architecture

wger-project/wger Main Repository Architecture
Key Modules:
wger/: Django project root directory
config/: Project configuration management module
core/: Core module
exercises/: Exercise management module
gallery/: Progress photo album
gym/: Gym management module
locale/: Localization module
mailer/: Mail system module
manager/: Management functions
measurements/: Body measurement data
nutrition/: Nutrition management // 需要说明在做什么
software/: Software information  // 需要说明在做什么
utils/: Utility functions

//说明各个版本号
Development Tools
Python: Main programming language
Node.js: Front-end assets
npm: JS package manager
virtualenv: Python virtual environment

wger-project/flutter Mobile Architecture
Technical Features:
Uses the Dart programming language
Material Design language
REST API client implementation
Multi-platform support (Android, iOS, F-Droid, and Flathub)

//说明模块结构的一致性，用途说明
Core Modules:
User authentication and registration
Workout plans
Nutrition plans
Progress tracking
Offline data

wger-project/docker Deployment Architecture // 需要增加细节
Complete Docker deployment solution
Deployment Environments
Production environment configuration (prod)
Development environment configuration (dev)
PostgreSQL development environment

Service Components 
Django application server
nginx: Reverse proxy and static file server  
db: PostgreSQL database
cache: Redis caching system
celery_worker: Background task processor
celery_beat: Scheduled task coordinator

wger-project/API // 没有这个repository ，缺少Frontend Repository: wger-project/react
RESTful API v2 built with Django REST Framework
Base URL: /api/v2/
Authentication:JWT tokens（suggested）or API Token
Data Format: JSON input/output
Documentation: /api/v2/schema/ui (Swagger UI) or /api/v2/schema/redoc (ReDoc)

//缺少API到代码的映射关系，优先级靠后
API Module Structure
/api/v2/
|- routine/      # Workout routines
|- exercise/     # Exercise database
|- workoutlog/   # Workout logs
|- ingredient/   # Nutrition ingredients
|- meal/         # Meal planning
|- userprofile/  # User profiles
|- weightentry/  # Weight tracking

Key Features
RESTful design with standard HTTP methods (GET, POST, PUT, DELETE)
Authentication-based API access, users only access their own data
Pagination and filtering for handling efficient data

//添加文件路径 //路径可以是relative paths within repository and/or repository links
Data Model Architecture
Modular Design (exercises application)
base.py: Abstract base models
category.py: Exercise categorization
equipment.py: Fitness equipment management
muscle.py: Muscle group classification
image.py, video.py: Media resource management
translation.py: Multi-language support
deletion_log.py: Data audit trail

//增加已知部署问题和解决方案
Development Environment
Option 1 — Docker (recommended for most cases).
Install Docker and Docker Compose. Clone the wger-project/docker repository. Edit the .env file.
Start with docker compose up and stop with docker compose down.
Option 2 — Manual installation (for advanced customization).
Install dependencies: PostgreSQL, Node.js, Yarn, Sass. Clone the wger-project/wger repository.
Create and activate a virtualenv with python -m venv venv and source venv/bin/activate. Install dependencies with pip install -e .. Collect resources with python manage.py collectstatic. Start with python manage.py runserver.
